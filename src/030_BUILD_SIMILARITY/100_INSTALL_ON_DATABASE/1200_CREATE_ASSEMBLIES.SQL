/**
* THIS CODE FILE HAS BEEN DERIVED FROM THE ORIGINAL CODE FILE PROVIDED AT:
* http://anastasiosyal.com/POST/2009/01/11/18.ASPX?#stringmetricsinsql
*
* Copyright (c) 2009, Anastasios Yalanopoulos
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*     * Redistributions of source code must retain the above copyright
*       notice, this list of conditions and the following disclaimer.
*     * Redistributions in binary form must reproduce the above copyright
*       notice, this list of conditions and the following disclaimer in the
*       documentation and/or other materials provided with the distribution.
*     * Neither the name of the <organization> nor the
*       names of its contributors may be used to endorse or promote products
*       derived from this software without specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY Anastasios Yalanopoulos ''AS IS'' AND ANY
* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
* WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
* DISCLAIMED. IN NO EVENT SHALL <copyright holder> BE LIABLE FOR ANY
* DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
* LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
* ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/


/*
ENSURE RUNNING ASSEMBLIES IS ENABLED ON THE DATABASE
*/
EXEC sp_configure'clr enabled', 1
RECONFIGURE


/**
CREATE THE SCHEMA IF IT DOES NOT ALREADY EXIST
*/
DECLARE @sql NVARCHAR(MAX)
SET @sql = 'create schema SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@'
IF NOT EXISTS (SELECT NAME FROM Sys.Schemas 
WHERE NAME = 'SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@')
BEGIN
EXEC sp_executesql @sql 
END 


/*
SIMMETRICS ASSEMBLY
*/ 
CREATE ASSEMBLY [SimMetrics_1.5]
AUTHORIZATION DBO
-- REPLACE THIS HEX WHEN YOU CHANGE SIMMETRICS
FROM 
@SIMMETRICS_DLL@
WITH PERMISSION_SET = SAFE

GO


/**********************************************************************************************
SIMILARITY DLL
*/
CREATE ASSEMBLY SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@
AUTHORIZATION DBO
-- REPLACE THIS HEX WHEN YOU CHANGE THE SIMILARITY DLL
FROM 
@SIMILARITY_DLL@
WITH PERMISSION_SET = SAFE

GO


/*
CAREFUL WHEN CALLING FULL NAMESPACE
USE:
EXTERNAL NAME [AssemblyName].[RootNamespaceInVisualStudio.NamespaceInCode.ClassName].[FunctionName]
*/
CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Levenshtein(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.Levenshtein
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.LevenshteinUnnormalised(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.LevenshteinUnnormalised
GO 


CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.NeedlemanWunch(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.NeedlemanWunch
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.NeedlemanWunchUnnormalised(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.NeedlemanWunchUnnormalised
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.SmithWaterman(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.SmithWaterman
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.SmithWatermanGotoh(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.SmithWatermanGotoh
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.SmithWatermanGotohWindowedAffine(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.SmithWatermanGotohWindowedAffine
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Jaro(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.Jaro
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.JaroWinkler(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.JaroWinkler
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.ChapmanLengthDeviation(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.ChapmanLengthDeviation
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.ChapmanMeanLength(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.ChapmanMeanLength
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.QGramsDistance(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.QGramsDistance
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.BlockDistance(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.BlockDistance
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.CosineSimilarity(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.CosineSimilarity
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.DiceSimilarity(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.DiceSimilarity
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.EuclideanDistance(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.EuclideanDistance
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.JaccardSimilarity(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.JaccardSimilarity
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.MatchingCoefficient(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.MatchingCoefficient
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.MongeElkan(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.MongeElkan
GO 

CREATE FUNCTION SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.OverlapCoefficient(@STRING1 NVARCHAR(MAX),@STRING2 NVARCHAR(MAX)) RETURNS float 
EXTERNAL NAME SIMILARITY_@MAJOR.VERSION@_@MINOR.VERSION@_@PATCH.VERSION@.Similarity.OverlapCoefficient
GO 

